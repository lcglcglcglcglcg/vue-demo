(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f50a9dce"],{"33b8":function(e,t,n){"use strict";n("acb2")},"4afe":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"overlay"}},[n("ul",[n("li",{staticClass:"title"},[e._v("Select Music")]),n("li",[n("button",{staticClass:"btn",attrs:{id:"btnA",type:"button"}},[e._v("Snowflakes Falling Down by Simon Panrucker")])]),n("li",[n("button",{staticClass:"btn",attrs:{id:"btnB",type:"button"}},[e._v("This Christmas by Dott")])]),n("li",[n("button",{staticClass:"btn",attrs:{id:"btnC",type:"button"}},[e._v("No room at the inn by TRG Banks")])]),n("li",[n("button",{staticClass:"btn",attrs:{id:"btnD",type:"button"}},[e._v("Jingle Bell Swing by Mark Smeby")])]),n("li",{staticClass:"separator"},[e._v("OR")]),n("li",[n("input",{attrs:{type:"file",id:"upload",hidden:""}}),n("label",{attrs:{for:"upload"}},[e._v("Upload File")])])])])}],i=n("3835"),r=n("5530"),s=(n("d81d"),n("cb29"),n("d3b7"),n("159b"),n("99af"),{data:function(){return{}},mounted:function(){var e,t,n,o,a,s=Math.PI,l=Math.sin,u=Math.cos,d=2*s,c=function(e,t,n,o,a){return o+(e-t)/(n-t)*(a-o)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array(e).fill(t).map((function(e,t){return e+t}))},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t+Math.random()*(e-t)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.floor(t+Math.random()*(e-t))},v=function(e){return e[m(e.length)]},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[t*u(e),t*l(e)]},h=0,g={time:{type:"f",value:0},step:{type:"f",value:0}},b={exposure:1,bloomStrength:.9,bloomThreshold:0,bloomRadius:.5},w=2048,T=4e3,_=new THREE.AudioListener,y=new THREE.Audio(_);document.querySelector("input").addEventListener("change",A,!1);var R=document.querySelectorAll(".btn");function x(){var i=document.getElementById("overlay");i.remove(),e=new THREE.Scene,n=new THREE.WebGLRenderer({antialias:!0}),n.setPixelRatio(window.devicePixelRatio),n.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(n.domElement),t=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e3),t.position.set(-.09397456774197047,-2.5597086635726947,24.420789670889008),t.rotation.set(.10443543723052419,-.003827152981119352,.0004011488708739715);var r=n.capabilities.isWebGL2?THREE.RedFormat:THREE.LuminanceFormat;g.tAudioData={value:new THREE.DataTexture(o.data,w/2,1,r)},S(e,g,3e3),P(e,g),f(10).map((function(t){M(e,g,T,[20,0,-20*t]),M(e,g,T,[-20,0,-20*t])}));var s=new THREE.RenderPass(e,t),l=new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight),1.5,.4,.85);l.threshold=b.bloomThreshold,l.strength=b.bloomStrength,l.radius=b.bloomRadius,a=new THREE.EffectComposer(n),a.addPass(s),a.addPass(l),B(t,n,a),H()}function H(e){o.getFrequencyData(),g.tAudioData.value.needsUpdate=!0,h=(h+1)%1e3,g.time.value=e,g.step.value=h,a.render(),requestAnimationFrame(H)}function C(e){document.getElementById("overlay").innerHTML='<div class="text-loading">Please Wait...</div>';var t=["https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Simon_Panrucker/Happy_Christmas_You_Guys/Simon_Panrucker_-_01_-_Snowflakes_Falling_Down.mp3","https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Dott/This_Christmas/Dott_-_01_-_This_Christmas.mp3","https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/TRG_Banks/TRG_Banks_Christmas_Album/TRG_Banks_-_12_-_No_room_at_the_inn.mp3","https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Mark_Smeby/En_attendant_Nol/Mark_Smeby_-_07_-_Jingle_Bell_Swing.mp3"],n=t[e],a=new THREE.AudioLoader;a.load(n,(function(e){y.setBuffer(e),y.play(),o=new THREE.AudioAnalyser(y,w),x()}))}function A(e){document.getElementById("overlay").innerHTML='<div class="text-loading">Please Wait...</div>';var t=e.target.files,n=new FileReader;n.onload=function(e){var t=e.target.result;_.context.decodeAudioData(t,(function(e){y.setBuffer(e),y.play(),o=new THREE.AudioAnalyser(y,w),x()}))},n.readAsArrayBuffer(t[0])}function M(e,t,n,o){for(var a="\n  attribute float mIndex;\n  varying vec3 vColor;\n  varying float opacity;\n  uniform sampler2D tAudioData;\n\n  float norm(float value, float min, float max ){\n      return (value - min) / (max - min);\n  }\n  float lerp(float norm, float min, float max){\n  return (max - min) * norm + min;\n  }\n\n  float map(float value, float sourceMin, float sourceMax, float destMin, float destMax){\n  return lerp(norm(value, sourceMin, sourceMax), destMin, destMax);\n  }\n\n\n  void main() {\n      vColor = color;\n      vec3 p = position;\n      vec4 mvPosition = modelViewMatrix * vec4( p, 1.0 );\n      float amplitude = texture2D( tAudioData, vec2( mIndex, 0.1 ) ).r;\n      float amplitudeClamped = clamp(amplitude-0.4,0.0, 0.6 );\n      float sizeMapped = map(amplitudeClamped, 0.0, 0.6, 1.0, 20.0);\n      opacity = map(mvPosition.z , -200.0, 15.0, 0.0, 1.0);\n      gl_PointSize = sizeMapped * ( 100.0 / -mvPosition.z );\n      gl_Position = projectionMatrix * mvPosition;\n  }\n",s="\n  varying vec3 vColor;\n  varying float opacity;\n  uniform sampler2D pointTexture;\n  void main() {\n      gl_FragColor = vec4( vColor, opacity );\n      gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord ); \n  }\n  ",l=new THREE.ShaderMaterial({uniforms:Object(r["a"])(Object(r["a"])({},t),{},{pointTexture:{value:(new THREE.TextureLoader).load("https://assets.codepen.io/3685267/spark1.png")}}),vertexShader:a,fragmentShader:s,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,vertexColors:!0}),u=new THREE.BufferGeometry,f=[],m=[],v=[],h=[],g=[],b=new THREE.Color,w=0;w<n;w++){var T=Math.random(),_=c(T,0,1,-8,10),y=c(T,0,1,0,6*d)+d/2*(w%2),R=E(y,c(T,0,1,5,0)),x=Object(i["a"])(R,2),H=x[0],C=x[1],A=c(T,0,1,1,0);f.push(C+p(-.3*A,.3*A)),f.push(_+p(-.3*A,.3*A)),f.push(H+p(-.3*A,.3*A)),b.setHSL(c(w,0,n,1,0),1,.5),m.push(b.r,b.g,b.b),h.push(p(1e3)),v.push(1);var M=c(w,0,n,1,0);g.push(M)}u.setAttribute("position",new THREE.Float32BufferAttribute(f,3).setUsage(THREE.DynamicDrawUsage)),u.setAttribute("color",new THREE.Float32BufferAttribute(m,3)),u.setAttribute("size",new THREE.Float32BufferAttribute(v,1)),u.setAttribute("phase",new THREE.Float32BufferAttribute(h,1)),u.setAttribute("mIndex",new THREE.Float32BufferAttribute(g,1));var P=new THREE.Points(u,l),S=Object(i["a"])(o,3),B=S[0],F=S[1],z=S[2];P.position.x=B,P.position.y=F,P.position.z=z,e.add(P)}function P(e,t){var n="\n  attribute float size;\n  attribute float phase;\n  attribute float phaseSecondary;\n\n  varying vec3 vColor;\n  varying float opacity;\n\n\n  uniform float time;\n  uniform float step;\n\n  float norm(float value, float min, float max ){\n      return (value - min) / (max - min);\n  }\n  float lerp(float norm, float min, float max){\n      return (max - min) * norm + min;\n  }\n\n  float map(float value, float sourceMin, float sourceMax, float destMin, float destMax){\n      return lerp(norm(value, sourceMin, sourceMax), destMin, destMax);\n  }\n  void main() {\n      float t = time* 0.0006;\n\n      vColor = color;\n\n      vec3 p = position;\n\n      p.y = map(mod(phase+step, 1000.0), 0.0, 1000.0, 25.0, -8.0);\n\n      p.x += sin(t+phase);\n      p.z += sin(t+phaseSecondary);\n\n      opacity = map(p.z, -150.0, 15.0, 0.0, 1.0);\n\n      vec4 mvPosition = modelViewMatrix * vec4( p, 1.0 );\n\n      gl_PointSize = size * ( 100.0 / -mvPosition.z );\n\n      gl_Position = projectionMatrix * mvPosition;\n\n  }\n  ",o="\n  uniform sampler2D pointTexture;\n  varying vec3 vColor;\n  varying float opacity;\n\n  void main() {\n      gl_FragColor = vec4( vColor, opacity );\n      gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord ); \n  }\n  ";function a(a){for(var i=300,s=new THREE.ShaderMaterial({uniforms:Object(r["a"])(Object(r["a"])({},t),{},{pointTexture:{value:(new THREE.TextureLoader).load(a)}}),vertexShader:n,fragmentShader:o,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,vertexColors:!0}),l=new THREE.BufferGeometry,u=[],d=[],c=[],f=[],m=[],E=new THREE.Color,h=0;h<i;h++){var g=[p(25,-25),0,p(15,-150)],b=g[0],w=g[1],T=g[2];u.push(b),u.push(w),u.push(T),E.set(v(["#f1d4d4","#f1f6f9","#eeeeee","#f1f1e8"])),d.push(E.r,E.g,E.b),f.push(p(1e3)),m.push(p(1e3)),c.push(p(4,2))}l.setAttribute("position",new THREE.Float32BufferAttribute(u,3)),l.setAttribute("color",new THREE.Float32BufferAttribute(d,3)),l.setAttribute("size",new THREE.Float32BufferAttribute(c,1)),l.setAttribute("phase",new THREE.Float32BufferAttribute(f,1)),l.setAttribute("phaseSecondary",new THREE.Float32BufferAttribute(m,1));var _=new THREE.Points(l,s);e.add(_)}var i=["https://assets.codepen.io/3685267/snowflake1.png","https://assets.codepen.io/3685267/snowflake2.png","https://assets.codepen.io/3685267/snowflake3.png","https://assets.codepen.io/3685267/snowflake4.png","https://assets.codepen.io/3685267/snowflake5.png"];i.forEach((function(e){a(e)}))}function S(e,t,n){for(var o="\n  attribute float size;\n  attribute vec3 customColor;\n  varying vec3 vColor;\n\n  void main() {\n      vColor = customColor;\n      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n      gl_PointSize = size * ( 300.0 / -mvPosition.z );\n      gl_Position = projectionMatrix * mvPosition;\n\n  }\n  ",a="\n  uniform vec3 color;\n  uniform sampler2D pointTexture;\n  varying vec3 vColor;\n\n  void main() {\n      gl_FragColor = vec4( vColor, 1.0 );\n      gl_FragColor = gl_FragColor * texture2D( pointTexture, gl_PointCoord );\n\n  }\n  ",i=new THREE.ShaderMaterial({uniforms:Object(r["a"])(Object(r["a"])({},t),{},{pointTexture:{value:(new THREE.TextureLoader).load("https://assets.codepen.io/3685267/spark1.png")}}),vertexShader:o,fragmentShader:a,blending:THREE.AdditiveBlending,depthTest:!1,transparent:!0,vertexColors:!0}),s=new THREE.BufferGeometry,l=[],u=[],d=[],c=new THREE.Color,f=0;f<n;f++){var m=[p(-25,25),0,p(-150,15)],E=m[0],h=m[1],g=m[2];l.push(E),l.push(h),l.push(g),c.set(v(["#93abd3","#f2f4c0","#9ddfd3"])),u.push(c.r,c.g,c.b),d.push(1)}s.setAttribute("position",new THREE.Float32BufferAttribute(l,3).setUsage(THREE.DynamicDrawUsage)),s.setAttribute("customColor",new THREE.Float32BufferAttribute(u,3)),s.setAttribute("size",new THREE.Float32BufferAttribute(d,1));var b=new THREE.Points(s,i);b.position.y=-8,e.add(b)}function B(e,t,n){document.addEventListener("keydown",(function(t){var n=e.position,o=(n.x,n.y,n.z,e.rotation);o.x,o.y,o.z})),window.addEventListener("resize",(function(){var o=window.innerWidth,a=window.innerHeight;e.aspect=o/a,e.updateProjectionMatrix(),t.setSize(o,a),n.setSize(o,a)}),!1)}R.forEach((function(e,t){return e.addEventListener("click",(function(){return C(t)}))}))}}),l=s,u=(n("33b8"),n("2877")),d=Object(u["a"])(l,o,a,!1,null,null,null);t["default"]=d.exports},acb2:function(e,t,n){}}]);