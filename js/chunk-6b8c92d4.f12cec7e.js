(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b8c92d4"],{"0710":function(t,e,n){"use strict";var o=n("e269"),i=n("592d"),s=n("cd7e"),r=n("0af5"),a=n("1e8d"),p=n("0999"),l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),d={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},h=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s["d"],n.element.style.position="absolute",n.element.style.pointerEvents="auto";var o=e.autoPan;return o&&"object"!==typeof o&&(o={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=o||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(d.ELEMENT,n.handleElementChanged),n.addChangeListener(d.MAP,n.handleMapChanged),n.addChangeListener(d.OFFSET,n.handleOffsetChanged),n.addChangeListener(d.POSITION,n.handlePositionChanged),n.addChangeListener(d.POSITIONING,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(e.positioning||"top-left"),void 0!==e.position&&n.setPosition(e.position),n}return l(e,t),e.prototype.getElement=function(){return this.get(d.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(d.MAP)||null},e.prototype.getOffset=function(){return this.get(d.OFFSET)},e.prototype.getPosition=function(){return this.get(d.POSITION)},e.prototype.getPositioning=function(){return this.get(d.POSITIONING)},e.prototype.handleElementChanged=function(){Object(p["e"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(p["f"])(this.element),Object(a["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(a["a"])(t,i["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(d.ELEMENT,t)},e.prototype.setMap=function(t){this.set(d.MAP,t)},e.prototype.setOffset=function(t){this.set(d.OFFSET,t)},e.prototype.setPosition=function(t){this.set(d.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(d.POSITION)){var n=this.getRect(e.getTargetElement(),e.getSize()),o=this.getElement(),i=this.getRect(o,[Object(p["c"])(o),Object(p["b"])(o)]),s=t||{},a=void 0===s.margin?20:s.margin;if(!Object(r["g"])(n,i)){var l=i[0]-n[0],h=n[2]-i[2],c=i[1]-n[1],u=n[3]-i[3],f=[0,0];if(l<0?f[0]=l-a:h<0&&(f[0]=Math.abs(h)+a),c<0?f[1]=c-a:u<0&&(f[1]=Math.abs(u)+a),0!==f[0]||0!==f[1]){var g=e.getView().getCenterInternal(),m=e.getPixelFromCoordinateInternal(g);if(!m)return;var P=[m[0]+f[0],m[1]+f[1]],v=s.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(P),duration:v.duration,easing:v.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),o=n.left+window.pageXOffset,i=n.top+window.pageYOffset;return[o,i,o+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(d.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),o=t.getSize();this.updateRenderedPosition(n,o)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,o=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+o[0])+"px",r=Math.round(t[1]+o[1])+"px",a="0%",p="0%";"bottom-right"==i||"center-right"==i||"top-right"==i?a="-100%":"bottom-center"!=i&&"center-center"!=i&&"top-center"!=i||(a="-50%"),"bottom-left"==i||"bottom-center"==i||"bottom-right"==i?p="-100%":"center-left"!=i&&"center-center"!=i&&"center-right"!=i||(p="-50%");var l="translate(".concat(a,", ").concat(p,") translate(").concat(s,", ").concat(r,")");this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l,n.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(o["a"]);e["a"]=h},"2b2d":function(t,e,n){},"592d":function(t,e,n){"use strict";e["a"]={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},"5b60":function(t,e,n){"use strict";n("2b2d")},"6ea0":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.popupShow,expression:"popupShow"}],ref:"mapPopup",staticClass:"map-popup-all"},[e("div",{staticClass:"map-popup-closer",on:{click:t.closePopup}},[t._v("+")]),e("h3",[t._v(t._s(t.title||" "))]),e("div",{attrs:{id:"popup-content"}},[t._t("default")],2)])},i=[],s=n("0710"),r={name:"MapOverlay",props:{position:{type:Array},className:{type:String},mapShow:{type:Boolean},title:{type:String},offset:{type:Array}},data(){return{popupShow:!0,dialogOverlay:null}},watch:{position:{handler(){this.reload()},deep:!0},className:{handler(){this.reload()},deep:!0},title:{handler(){this.reload()},deep:!0},offset:{handler(){this.reload()},deep:!0},mapShow:{handler(t){this.popupShow=t},deep:!0,immediate:!0}},mounted(){this.$nextTick(()=>{this.reload()})},methods:{reload(){this.dialogOverlay&&this.$parent.$data.mapData.removeOverlay(this.dialogOverlay),this.dialogOverlay=new s["a"]({element:this.$refs.mapPopup,stopEvent:!1,offset:this.offset||[0,0],className:this.className||"map-popup",autoPanAnimation:{duration:250}}),this.dialogOverlay.setPosition(this.position),this.$parent.$data.mapData.addOverlay(this.dialogOverlay)},closePopup(){this.$emit("close",!1)}}},a=r,p=(n("5b60"),n("2877")),l=Object(p["a"])(a,o,i,!1,null,"218bb7b5",null);e["default"]=l.exports}}]);