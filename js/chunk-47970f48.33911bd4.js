(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47970f48"],{"0710":function(t,e,r){"use strict";var n=r("e269"),o=r("592d"),i=r("cd7e"),a=r("0af5"),s=r("1e8d"),c=r("0999"),u=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),f={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},h=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un,r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+i["d"],r.element.style.position="absolute",r.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!==typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(f.ELEMENT,r.handleElementChanged),r.addChangeListener(f.MAP,r.handleMapChanged),r.addChangeListener(f.OFFSET,r.handleOffsetChanged),r.addChangeListener(f.POSITION,r.handlePositionChanged),r.addChangeListener(f.POSITIONING,r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(e.positioning||"top-left"),void 0!==e.position&&r.setPosition(e.position),r}return u(e,t),e.prototype.getElement=function(){return this.get(f.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(f.MAP)||null},e.prototype.getOffset=function(){return this.get(f.OFFSET)},e.prototype.getPosition=function(){return this.get(f.POSITION)},e.prototype.getPositioning=function(){return this.get(f.POSITIONING)},e.prototype.handleElementChanged=function(){Object(c["e"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(c["f"])(this.element),Object(s["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(s["a"])(t,o["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(f.ELEMENT,t)},e.prototype.setMap=function(t){this.set(f.MAP,t)},e.prototype.setOffset=function(t){this.set(f.OFFSET,t)},e.prototype.setPosition=function(t){this.set(f.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(f.POSITION)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),o=this.getRect(n,[Object(c["c"])(n),Object(c["b"])(n)]),i=t||{},s=void 0===i.margin?20:i.margin;if(!Object(a["g"])(r,o)){var u=o[0]-r[0],h=r[2]-o[2],l=o[1]-r[1],p=r[3]-o[3],d=[0,0];if(u<0?d[0]=u-s:h<0&&(d[0]=Math.abs(h)+s),l<0?d[1]=l-s:p<0&&(d[1]=Math.abs(p)+s),0!==d[0]||0!==d[1]){var _=e.getView().getCenterInternal(),g=e.getPixelFromCoordinateInternal(_);if(!g)return;var E=[g[0]+d[0],g[1]+d[1]],m=i.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(E),duration:m.duration,easing:m.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,o=r.top+window.pageYOffset;return[n,o,n+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(f.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var i=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",c="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?s="-100%":"bottom-center"!=o&&"center-center"!=o&&"top-center"!=o||(s="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?c="-100%":"center-left"!=o&&"center-center"!=o&&"center-right"!=o||(c="-50%");var u="translate(".concat(s,", ").concat(c,") translate(").concat(i,", ").concat(a,")");this.rendered.transform_!=u&&(this.rendered.transform_=u,r.transform=u,r.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(n["a"]);e["a"]=h},"173e":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this;t._self._c;return t._m(0)},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"earth"},[e("div",{attrs:{id:"ol-container"}})])}],i=(r("14d9"),r("5bc0"),r("256f"),r("5831")),a=r("f403"),s=r("4cdf"),c=r("17fa"),u=r("2d71");let f;var h={name:"Earth",mounted(){this.initMap()},methods:{initMap(){f=new u["a"]({target:"ol-container",layers:[new u["d"]({source:new u["b"]})],view:new u["e"]({projection:"EPSG:4326",center:[100,20],zoom:2})})},test(){let t={symbol:{symbolType:"image",size:3,color:"#ff0000"}},e=[];for(let o=0;o<1e4;o++){let t=360*Math.random(),r=360*Math.random(),n=-180+t,o=-90+r,i=new s["a"]({geometry:new a["a"]([n,o])});e.push(i)}let r=new i["a"]({features:e}),n=new c["a"]({source:r,style:t});f.addLayer(n)}}},l=h,p=(r("4adc"),r("2877")),d=Object(p["a"])(l,n,o,!1,null,"711fbdbb",null);e["default"]=d.exports},"17fa":function(t,e,r){"use strict";var n=r("1af9"),o=r("ae50"),i=r("a43f"),a=r("496f"),s=r("617d"),c=r("38f3"),u=34962,f=34963,h=35040,l=35044,p=35048,d=5121,_=5123,g=5125,E=5126,m=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function v(t,e){for(var r=Object(c["a"])({preserveDrawingBuffer:!0,antialias:!s["f"]},e),n=m.length,o=0;o<n;++o)try{var i=t.getContext(m[o],r);if(i)return i}catch(a){}return null}var T=r("92fa5"),y={STATIC_DRAW:l,STREAM_DRAW:h,DYNAMIC_DRAW:p},R=function(){function t(t,e){this.array=null,this.type=t,Object(T["a"])(t===u||t===f,62),this.usage=void 0!==e?e:y.STATIC_DRAW}return t.prototype.ofSize=function(t){this.array=new(x(this.type))(t)},t.prototype.fromArray=function(t){var e=x(this.type);this.array=e.from?e.from(t):new e(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(x(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}();function x(t){switch(t){case u:return Float32Array;case f:return Uint32Array;default:return Float32Array}}var b=R,O=r("df4c"),A=r("faf4"),S=r("3333"),C=r("070d"),L={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},w=r("da5c"),P=r("1300"),U="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",N="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n",I=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||U),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||N),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();var o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=0,o=e.RGBA,i=0,a=e.RGBA,s=e.UNSIGNED_BYTE,c=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,n,o,r[0],r[1],i,a,s,c),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e,r,n){var o=this.getGL(),i=t.size;if(o.bindFramebuffer(o.FRAMEBUFFER,e?e.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!e){var a=Object(P["c"])(o.canvas);if(!t.renderTargets[a]){var s=o.getContextAttributes();s&&s.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),t.renderTargets[a]=!0}}o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,i[0],i[1]),o.uniform1i(this.renderTargetTextureLocation_,0);var c=t.layerStatesArray[t.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,c),this.applyUniforms(t),r&&r(o,t),o.drawArrays(o.TRIANGLES,0,6),n&&n(o,t)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(o){if(e="function"===typeof o.value?o.value(t):o.value,e instanceof HTMLCanvasElement||e instanceof ImageData)o.texture||(o.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,o.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(o.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(o.location,e[0],e[1]);case 3:return void r.uniform3f(o.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(o.location,e[0],e[1],e[2],e[3]);default:return}else"number"===typeof e&&r.uniform1f(o.location,e)}))},t}(),M=I,D=r("a896");function F(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function B(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var G=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},X={UNSIGNED_BYTE:d,UNSIGNED_SHORT:_,UNSIGNED_INT:g,FLOAT:E},z={};function V(t){return"shared/"+t}var H=0;function Y(){var t="unique/"+H;return H+=1,t}function W(t){var e=z[t];if(!e){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",e={users:0,canvas:r},z[t]=e}return e.users+=1,e.canvas}function k(t){var e=z[t];if(e&&(e.users-=1,!(e.users>0))){var r=e.canvas,n=v(r),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),delete z[t]}}var K=function(t){function e(e){var r=t.call(this)||this,n=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvasCacheKey_=n.canvasCacheKey?V(n.canvasCacheKey):Y(),r.canvas_=W(r.canvasCacheKey_),r.gl_=v(r.canvas_),r.bufferCache_={},r.extensionCache_={},r.currentProgram_=null,r.canvas_.addEventListener(L.LOST,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener(L.RESTORED,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=Object(D["c"])(),r.offsetScaleMatrix_=Object(D["c"])(),r.tmpMat4_=F(),r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],n.uniforms&&r.setUniforms(n.uniforms);var o=r.getGL();return r.postProcessPasses_=n.postProcesses?n.postProcesses.map((function(t){return new M({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new M({webGlContext:o})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return G(e,t),e.prototype.setUniforms=function(t){for(var e in this.uniforms_=[],t)this.uniforms_.push({name:e,value:t[e]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===V(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e},e.prototype.bindBuffer=function(t){var e=this.getGL(),r=Object(P["c"])(t),n=this.bufferCache_[r];if(!n){var o=e.createBuffer();n={buffer:t,webGlBuffer:o},this.bufferCache_[r]=n}e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=Object(P["c"])(t),n=this.bufferCache_[r];n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(L.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(L.RESTORED,this.boundHandleWebGLContextRestored_),k(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,e){var r=this.getGL(),n=this.getCanvas(),o=t.size,i=t.pixelRatio;n.width=o[0]*i,n.height=o[1]*i,n.style.width=o[0]+"px",n.style.height=o[1]+"px",r.useProgram(this.currentProgram_);for(var a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,e?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),o=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,o[0],o[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL();this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,o=4,i=e-t,a=t*o;r.drawElements(r.TRIANGLES,i,n,a)},e.prototype.finalizeDraw=function(t,e,r){for(var n=0,o=this.postProcessPasses_.length;n<o;n++)n===o-1?this.postProcessPasses_[n].apply(t,null,e,r):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=Object(D["g"])(this.offsetScaleMatrix_);Object(D["i"])(n,2/e[0],2/e[1]);var o=Object(D["g"])(this.offsetRotateMatrix_);0!==r&&Object(D["h"])(o,-r),this.setUniformMatrixValue(j.OFFSET_SCALE_MATRIX,B(this.tmpMat4_,n)),this.setUniformMatrixValue(j.OFFSET_ROTATION_MATRIX,B(this.tmpMat4_,o)),this.setUniformFloatValue(j.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(j.ZOOM,t.viewState.zoom),this.setUniformFloatValue(j.RESOLUTION,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(o){if(e="function"===typeof o.value?o.value(t):o.value,e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData){o.texture||(o.prevValue=void 0,o.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,o.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);var i=!(e instanceof HTMLImageElement)||e.complete;i&&o.prevValue!==e&&(o.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(o.name),n++)}else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(o.name,B(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(o.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(o.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(o.name),e[0],e[1],e[2],e[3]);default:return}else"number"===typeof e&&r.uniform1f(this.getUniformLocation(o.name),e)}.bind(this))},e.prototype.useProgram=function(t){if(t==this.currentProgram_)return!1;var e=this.getGL();return e.useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),o=this.compileShader(e,r.VERTEX_SHADER),i=r.createProgram();if(r.attachShader(i,n),r.attachShader(i,o),r.linkProgram(i),!r.getShaderParameter(n,r.COMPILE_STATUS)){var a="Fragment shader compliation failed: ".concat(r.getShaderInfoLog(n));throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(o,r.COMPILE_STATUS)){a="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(o));throw new Error(a)}if(r.deleteShader(o),!r.getProgramParameter(i,r.LINK_STATUS)){a="GL program linking failed: ".concat(r.getShaderInfoLog(o));throw new Error(a)}return i},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,o=t.viewState.resolution,i=t.viewState.center;return Object(D["g"])(e),Object(D["b"])(e,0,0,2/(o*r[0]),2/(o*r[1]),-n,-i[0],-i[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformFloatVec4=function(t,e){this.getGL().uniform4fv(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,o){var i=this.getAttributeLocation(t);i<0||(this.getGL().enableVertexAttribArray(i),this.getGL().vertexAttribPointer(i,e,r,!1,n,o))},e.prototype.enableAttributes=function(t){for(var e=Z(t),r=0,n=0;n<t.length;n++){var o=t[n];this.enableAttributeArray_(o.name,o.size,o.type||E,e,r),r+=o.size*q(o.type)}},e.prototype.handleWebGLContextLost=function(){Object(c["b"])(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),o=r||n.createTexture(),i=0,a=n.RGBA,s=0,c=n.RGBA,u=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,o),e?n.texImage2D(n.TEXTURE_2D,i,a,c,u,e):n.texImage2D(n.TEXTURE_2D,i,a,t[0],t[1],s,c,u,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),o},e}(w["a"]);function Z(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*q(n.type)}return e}function q(t){switch(t){case X.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case X.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case X.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case X.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var J=K,Q=r("0af5"),$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),tt={GENERATE_BUFFERS:"GENERATE_BUFFERS"},et=function(t){function e(e,r){var n=t.call(this,e)||this,o=r||{};return n.inversePixelTransform_=Object(D["c"])(),n.pixelContext_=null,n.postProcesses_=o.postProcesses,n.uniforms_=o.uniforms,n.helper,e.addChangeListener(O["a"].MAP,n.removeHelper.bind(n)),n.dispatchPreComposeEvent=n.dispatchPreComposeEvent.bind(n),n.dispatchPostComposeEvent=n.dispatchPostComposeEvent.bind(n),n}return $(e,t),e.prototype.dispatchPreComposeEvent=function(t,e){var r=this.getLayer();if(r.hasListener(C["a"].PRECOMPOSE)){var n=new S["a"](C["a"].PRECOMPOSE,void 0,e,t);r.dispatchEvent(n)}},e.prototype.dispatchPostComposeEvent=function(t,e){var r=this.getLayer();if(r.hasListener(C["a"].POSTCOMPOSE)){var n=new S["a"](C["a"].POSTCOMPOSE,void 0,e,t);r.dispatchEvent(n)}},e.prototype.reset=function(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(t){if(this.getLayer().getRenderSource()){for(var r=!0,n=-1,o=void 0,i=0,a=t.layerStatesArray.length;i<a;i++){var s=t.layerStatesArray[i].layer,c=s.getRenderer();if(c instanceof e){var u=s.getClassName();if((r||u!==o)&&(n+=1,r=!1),o=u,c===this)break}else r=!0}var f="map/"+t.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(f)||(this.removeHelper(),this.helper=new J({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:f}),o&&(this.helper.getCanvas().className=o),this.afterHelperCreated())}return this.prepareFrameInternal(t)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(t){return!0},e.prototype.disposeInternal=function(){this.removeHelper(),t.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){Object(D["b"])(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);var o=new S["a"](t,this.inversePixelTransform_,r,e);n.dispatchEvent(o)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(C["a"].PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(C["a"].POSTRENDER,t,e)},e.prototype.getDataAtPixel=function(t,e,r){var n=Object(D["a"])([e.pixelRatio,0,0,e.pixelRatio,0,0],t.slice()),o=this.helper.getGL();if(!o)return null;var i=this.getLayer(),a=i.getExtent();if(a){var s=Object(D["a"])(e.pixelToCoordinateTransform,t.slice());if(!Object(Q["f"])(a,s))return null}var c=o.getContextAttributes();if(!c||!c.preserveDrawingBuffer)return new Uint8Array;var u,f=Math.round(n[0]),h=Math.round(n[1]),l=this.pixelContext_;if(!l){var p=document.createElement("canvas");p.width=1,p.height=1,l=p.getContext("2d"),this.pixelContext_=l}l.clearRect(0,0,1,1);try{l.drawImage(o.canvas,f,h,1,1,0,0,1,1),u=l.getImageData(0,0,1,1).data}catch(d){return u}return 0===u[3]?null:u},e}(A["a"]);function rt(t,e){var r=e||[],n=256,o=n-1;return r[0]=Math.floor(t/n/n/n)/o,r[1]=Math.floor(t/n/n)%n/o,r[2]=Math.floor(t/n)%n/o,r[3]=t%n/o,r}function nt(t){var e=0,r=256,n=r-1;return e+=Math.round(t[0]*r*r*r*n),e+=Math.round(t[1]*r*r*n),e+=Math.round(t[2]*r*n),e+=Math.round(t[3]*n),e}var ot=et,it=r("9f5e"),at=new Uint8Array(4),st=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){Object(it["b"])(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return at[0]=0,at[1]=0,at[2]=0,at[3]=0,at;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return at[0]=this.data_[4*r],at[1]=this.data_[4*r+1],at[2]=this.data_[4*r+2],at[3]=this.data_[4*r+3],at},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),ct=st,ut=r("7fd1"),ft=r("1e8d"),ht=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=function(t){function e(e,r){var n=this,o=r.uniforms||{},a=Object(D["c"])();o[j.PROJECTION_MATRIX]=a,n=t.call(this,e,{uniforms:o,postProcesses:r.postProcesses})||this,n.ready=!1,n.sourceRevision_=-1,n.verticesBuffer_=new b(u,p),n.hitVerticesBuffer_=new b(u,p),n.indicesBuffer_=new b(f,p),n.vertexShader_=r.vertexShader,n.fragmentShader_=r.fragmentShader,n.program_,n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitVertexShader_=r.hitVertexShader,n.hitFragmentShader_=r.hitFragmentShader,n.hitProgram_;var s=r.attributes?r.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:X.FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:X.FLOAT},{name:"a_index",size:1,type:X.FLOAT}].concat(s),n.hitDetectionAttributes=[{name:"a_position",size:2,type:X.FLOAT},{name:"a_index",size:1,type:X.FLOAT},{name:"a_hitColor",size:4,type:X.FLOAT},{name:"a_featureUid",size:1,type:X.FLOAT}].concat(s),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=Object(Q["j"])(),n.currentTransform_=a,n.renderTransform_=Object(D["c"])(),n.invertRenderTransform_=Object(D["c"])(),n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_,n.generateBuffersRun_=0,n.worker_=Object(ut["a"])(),n.worker_.addEventListener("message",function(t){var e=t.data;if(e.type===tt.GENERATE_BUFFERS){var r=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,Object(D["d"])(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):(this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.generateBuffersRun===this.generateBuffersRun_&&(this.ready=!0)),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var c=n.getLayer().getSource();return n.sourceListenKeys_=[Object(ft["a"])(c,i["a"].ADDFEATURE,n.handleSourceFeatureAdded_,n),Object(ft["a"])(c,i["a"].CHANGEFEATURE,n.handleSourceFeatureChanged_,n),Object(ft["a"])(c,i["a"].REMOVEFEATURE,n.handleSourceFeatureDelete_,n),Object(ft["a"])(c,i["a"].CLEAR,n.handleSourceFeatureClear_,n)],c.forEachFeature(function(t){this.featureCache_[Object(P["c"])(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}.bind(n)),n}return ht(e,t),e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new ct(this.helper))},e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[Object(P["c"])(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[Object(P["c"])(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){var e=t.feature;delete this.featureCache_[Object(P["c"])(e)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.helper.getGL();this.preRender(e,t);var r=t.viewState.projection,n=this.getLayer(),o=n.getSource(),i=o.getWrapX()&&r.canWrapX(),a=r.getExtent(),s=t.extent,c=i?Object(Q["E"])(a):null,u=i?Math.ceil((s[2]-a[2])/c)+1:1,f=i?Math.floor((s[0]-a[0])/c):0,h=f,l=this.indicesBuffer_.getSize();do{this.helper.makeProjectionTransform(t,this.currentTransform_),Object(D["l"])(this.currentTransform_,h*c,0),Object(D["f"])(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.drawElements(0,l)}while(++h<u);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var p=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(t,f,u,c),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),p},e.prototype.prepareFrameInternal=function(t){var e=this.getLayer(),r=e.getSource(),n=t.viewState,i=!t.viewHints[a["a"].ANIMATING]&&!t.viewHints[a["a"].INTERACTING],s=!Object(Q["o"])(this.previousExtent_,t.extent),c=this.sourceRevision_<r.getRevision();if(c&&(this.sourceRevision_=r.getRevision()),i&&(s||c)){var u=n.projection,f=n.resolution,h=e instanceof o["a"]?e.getRenderBuffer():0,l=Object(Q["c"])(t.extent,h*f);r.loadFeatures(l,f,u),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=Object(D["c"])();this.helper.makeProjectionTransform(t,e);var r,n,o=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===o||(this.renderInstructions_=new Float32Array(o)),this.hitDetectionEnabled_){var i=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===i||(this.hitRenderInstructions_=new Float32Array(i))}var a,s=[],c=[],u=0,f=0;for(var h in this.featureCache_)if(r=this.featureCache_[h],n=r.geometry,n&&"Point"===n.getType()){s[0]=n.getFlatCoordinates()[0],s[1]=n.getFlatCoordinates()[1],Object(D["a"])(e,s),a=rt(f+6,c),this.renderInstructions_[u++]=s[0],this.renderInstructions_[u++]=s[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=s[0],this.hitRenderInstructions_[f++]=s[1],this.hitRenderInstructions_[f++]=a[0],this.hitRenderInstructions_[f++]=a[1],this.hitRenderInstructions_[f++]=a[2],this.hitRenderInstructions_[f++]=a[3],this.hitRenderInstructions_[f++]=Number(h));for(var l=void 0,p=0;p<this.customAttributes.length;p++)l=this.customAttributes[p].callback(r.feature,r.properties),this.renderInstructions_[u++]=l,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=l)}var d={type:tt.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(d["projectionTransform"]=e,d["generateBuffersRun"]=++this.generateBuffersRun_,this.ready=!1,this.worker_.postMessage(d,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var _={type:tt.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};_["projectionTransform"]=e,_["hitDetection"]=!0,this.worker_.postMessage(_,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,o){if(Object(T["a"])(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var i=Object(D["a"])(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(i[0]/2,i[1]/2),s=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=nt(s),u=this.hitRenderInstructions_[c],f=Math.floor(u).toString(),h=this.getLayer().getSource(),l=h.getFeatureByUid(f);return l?n(l,this.getLayer(),null):void 0}},e.prototype.renderHitDetection=function(t,e,r,n){if(this.hitVerticesBuffer_.getSize()){var o=e;this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),Object(D["l"])(this.currentTransform_,o*n,0),Object(D["f"])(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t);var i=this.indicesBuffer_.getSize();this.helper.drawElements(0,i)}while(++o<r)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){Object(ft["c"])(t)})),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(ot),pt=lt,dt=function(){function t(t,e){this.name=t,this.data=e,this.texture_=null}return t.prototype.getTexture=function(t){if(!this.texture_){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_},t}(),_t=dt,gt=r("5116"),Et=r("dc07"),mt=r("acc1"),vt=r("5e31"),Tt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yt=function(t){function e(e){var r=this,n=mt["a"].IDLE;return r=t.call(this,e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate})||this,r.loader_=e.loader,r.data_=null,r.error_=null,r.size_=e.size||[256,256],r}return Tt(e,t),e.prototype.getSize=function(){return this.size_},e.prototype.getData=function(){return this.data_},e.prototype.getError=function(){return this.error_},e.prototype.load=function(){if(this.state===mt["a"].IDLE||this.state===mt["a"].ERROR){this.state=mt["a"].LOADING,this.changed();var t=this;this.loader_().then((function(e){t.data_=e,t.state=mt["a"].LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=mt["a"].ERROR,t.changed()}))}},e}(vt["a"]),Rt=yt,xt=r("0ec0"),bt=r("01d4"),Ot=r("7f98"),At=r("2efc"),St=r("345d"),Ct=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function Lt(t,e,r){var n=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function wt(t,e,r,n){Lt(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}function Pt(t,e,r,n,o,i){var a,s,c=t.getGL();if(r instanceof Float32Array){a=c.FLOAT,t.getExtension("OES_texture_float");var u=t.getExtension("OES_texture_float_linear");s=null!==u}else a=c.UNSIGNED_BYTE,s=!0;Lt(c,e,i&&s);var f,h=r.byteLength/n[1],l=1;switch(h%8===0?l=8:h%4===0?l=4:h%2===0&&(l=2),o){case 1:f=c.LUMINANCE;break;case 2:f=c.LUMINANCE_ALPHA;break;case 3:f=c.RGB;break;case 4:f=c.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(o))}var p=c.getParameter(c.UNPACK_ALIGNMENT);c.pixelStorei(c.UNPACK_ALIGNMENT,l),c.texImage2D(c.TEXTURE_2D,0,f,n[0],n[1],0,f,a,r),c.pixelStorei(c.UNPACK_ALIGNMENT,p)}var Ut=null;function Nt(){var t=document.createElement("canvas");t.width=1,t.height=1,Ut=t.getContext("2d")}var It=function(t){function e(e){var r=t.call(this)||this;r.tile,r.textures=[],r.handleTileChange_=r.handleTileChange_.bind(r),r.renderSize_=Object(St["c"])(e.grid.getTileSize(e.tile.tileCoord[0])),r.gutter_=e.gutter||0,r.bandCount=NaN,r.helper_=e.helper;var n=new b(u,l);return n.fromArray([0,1,1,1,1,0,0,0]),r.helper_.flushBufferData(n),r.coords=n,r.setTile(e.tile),r}return Ct(e,t),e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(bt["a"].CHANGE,this.handleTileChange_),this.tile=t,this.textures.length=0,this.loaded=t.getState()===mt["a"].LOADED,this.loaded)this.uploadTile_();else{if(t instanceof Ot["a"]){var e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(bt["a"].CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var t=this.helper_,e=t.getGL(),r=this.tile;if(r instanceof Ot["a"]||r instanceof At["a"]){var n=e.createTexture();return this.textures.push(n),this.bandCount=4,void wt(e,n,r.getImage(),r.interpolate)}var o=r.getSize(),i=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],a=r.getData(),s=a instanceof Float32Array,c=i[0]*i[1],u=s?Float32Array:Uint8Array,f=u.BYTES_PER_ELEMENT,h=a.byteLength/i[1];this.bandCount=Math.floor(h/f/i[0]);var l=Math.ceil(this.bandCount/4);if(1===l){n=e.createTexture();return this.textures.push(n),void Pt(t,n,a,i,this.bandCount,r.interpolate)}for(var p=new Array(l),d=0;d<l;++d){n=e.createTexture();this.textures.push(n);var _=d<l-1?4:this.bandCount%4;p[d]=new u(c*_)}for(var g=0,E=0,m=i[0]*this.bandCount,v=0;v<i[1];++v){for(var T=0;T<m;++T){var y=a[E+T],R=Math.floor(g/this.bandCount),x=T%this.bandCount,b=(d=Math.floor(x/4),p[d]),O=(_=b.length/c,x%4);b[R*_+O]=y,++g}E+=h/f}for(d=0;d<l;++d){n=this.textures[d],b=p[d],_=b.length/c;Pt(t,n,b,i,_,r.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===mt["a"].LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(bt["a"].CHANGE))},e.prototype.disposeInternal=function(){var t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(bt["a"].CHANGE,this.handleTileChange_)},e.prototype.getPixelData=function(t,e){if(!this.loaded)return null;var r=this.renderSize_[0],n=this.renderSize_[1],o=this.gutter_;if(this.tile instanceof Rt){var i=this.tile.getSize(),a=i[0],s=i[1],c=a+2*o,u=s+2*o,f=o+Math.floor(a*(t/r)),h=o+Math.floor(s*(e/n)),l=this.tile.getData();if(l instanceof DataView){var p=l.byteLength/(c*u),d=p*(h*c+f),_=l.buffer.slice(d,d+p);return new DataView(_)}var g=this.bandCount*(h*c+f);return l.slice(g,g+this.bandCount)}Ut||Nt(),Ut.clearRect(0,0,1,1);var E,m=this.tile.getImage(),v=m.width,T=m.height,y=v-2*o,R=T-2*o,x=o+Math.floor(y*(t/r)),b=o+Math.floor(R*(e/n));try{Ut.drawImage(m,x,b,1,1,0,0,1,1),E=Ut.getImageData(0,0,1,1).data}catch(O){return Ut=null,null}return E},e}(xt["a"]),Mt=It,Dt=r("2c30"),Ft=r("256f"),Bt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gt={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},jt={TEXTURE_COORD:"a_textureCoord"},Xt=[{name:jt.TEXTURE_COORD,size:2,type:X.FLOAT}],zt={};function Vt(t){return 2*(1-1/(t+1))-1}function Ht(t,e,r){r in t||(t[r]=[]),t[r].push(e)}function Yt(t,e){var r=t.layerStatesArray[t.layerIndex];r.extent&&(e=Object(Q["A"])(e,Object(Ft["g"])(r.extent,t.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var o=n.getTileGridForProjection(t.viewState.projection).getExtent();o&&(e=Object(Q["A"])(e,o))}return e}function Wt(t,e){return"".concat(t.getKey(),",").concat(Object(Dt["c"])(e))}(function(t){function e(e,r){var n=t.call(this,e,{uniforms:r.uniforms})||this;n.renderComplete=!1,n.tileTransform_=Object(D["c"])(),n.tempMat4_=F(),n.tempTileRange_=new Et["b"](0,0,0,0),n.tempTileCoord_=Object(Dt["a"])(0,0,0),n.tempSize_=[0,0],n.program_,n.vertexShader_=r.vertexShader,n.fragmentShader_=r.fragmentShader,n.indices_=new b(f,l),n.indices_.fromArray([0,1,3,1,2,3]);var o=void 0!==r.cacheSize?r.cacheSize:512;return n.tileTextureCache_=new gt["a"](o),n.paletteTextures_=r.paletteTextures||[],n.frameState_=null,n}Bt(e,t),e.prototype.reset=function(e){t.prototype.reset.call(this,{uniforms:e.uniforms}),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==mt["a"].LOADED||r==mt["a"].EMPTY||r==mt["a"].ERROR&&!n},e.prototype.prepareFrameInternal=function(t){var e=this.getLayer(),r=e.getRenderSource();return!!r&&(!Object(Q["H"])(Yt(t,t.extent))&&"ready"===r.getState())},e.prototype.enqueueTiles=function(t,e,r,n){var o=t.viewState,i=this.getLayer(),a=i.getRenderSource(),s=a.getTileGridForProjection(o.projection),c=a.getGutterForProjection(o.projection),u=Object(P["c"])(a);u in t.wantedTiles||(t.wantedTiles[u]={});for(var f=t.wantedTiles[u],h=this.tileTextureCache_,l=Math.max(r-i.getPreload(),s.getMinZoom(),i.getMinZoom()),p=r;p>=l;--p)for(var d=s.getTileRangeForExtentAndZ(e,p,this.tempTileRange_),_=s.getResolution(p),g=d.minX;g<=d.maxX;++g)for(var E=d.minY;E<=d.maxY;++E){var m=Object(Dt["a"])(p,g,E,this.tempTileCoord_),v=Wt(a,m),T=void 0,y=void 0;if(h.containsKey(v)&&(T=h.get(v),y=T.tile),!T||T.tile.key!==a.getKey())if(y=a.getTile(p,g,E,t.pixelRatio,o.projection),T)if(this.isDrawableTile_(y))T.setTile(y);else{var R=y.getInterimTile();T.setTile(R)}else T=new Mt({tile:y,grid:s,helper:this.helper,gutter:c}),h.set(v,T);Ht(n,T,p);var x=y.getKey();f[x]=!0,y.getState()===mt["a"].IDLE&&(t.tileQueue.isKeyQueued(x)||t.tileQueue.enqueue([y,u,s.getTileCoordCenter(m),_]))}},e.prototype.renderFrame=function(t){this.frameState_=t,this.renderComplete=!0;var e=this.helper.getGL();this.preRender(e,t);var r=t.viewState,n=this.getLayer(),o=n.getRenderSource(),i=o.getTileGridForProjection(r.projection),a=o.getGutterForProjection(r.projection),s=Yt(t,t.extent),c=i.getZForResolution(r.resolution,o.zDirection),u={};if(t.nextExtent){var f=i.getZForResolution(r.nextResolution,o.zDirection),h=Yt(t,t.nextExtent);this.enqueueTiles(t,h,f,u)}this.enqueueTiles(t,s,c,u);for(var l={},p=Object(P["c"])(this),d=t.time,_=!1,g=u[c],E=0,m=g.length;E<m;++E){var v=g[E],T=v.tile,y=T.tileCoord;if(v.loaded){var R=T.getAlpha(p,d);if(1===R){T.endTransition(p);continue}_=!0;var x=Object(Dt["c"])(y);l[x]=R}this.renderComplete=!1;var b=this.findAltTiles_(i,y,c+1,u);if(!b)for(var O=i.getMinZoom(),A=c-1;A>=O;--A){var S=this.findAltTiles_(i,y,A,u);if(S)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(t,!_);for(var C=Object.keys(u).map(Number).sort(it["f"]),L=r.center[0],w=r.center[1],U=0,N=C.length;U<N;++U){var I=C[U],M=i.getResolution(I),F=Object(St["c"])(i.getTileSize(I),this.tempSize_),G=i.getOrigin(I),j=F[0]+2*a,X=F[1]+2*a,z=j/X,V=(L-G[0])/(F[0]*M),H=(G[1]-w)/(F[1]*M),Y=r.resolution/M,W=Vt(I),k=u[I];for(E=0,m=k.length;E<m;++E){v=k[E];if(v.loaded){T=v.tile,y=T.tileCoord,x=Object(Dt["c"])(y);var K=y[1],Z=y[2];Object(D["g"])(this.tileTransform_),Object(D["i"])(this.tileTransform_,2/(t.size[0]*Y/j),-2/(t.size[1]*Y/j)),Object(D["h"])(this.tileTransform_,r.rotation),Object(D["i"])(this.tileTransform_,1,1/z),Object(D["l"])(this.tileTransform_,(F[0]*(K-V)-a)/j,(F[1]*(Z-H)-a)/X),this.helper.setUniformMatrixValue(Gt.TILE_TRANSFORM,B(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(v.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Xt);var q=0;while(q<v.textures.length){var J="TEXTURE"+q,$="".concat(Gt.TILE_TEXTURE_ARRAY,"[").concat(q,"]");e.activeTexture(e[J]),e.bindTexture(e.TEXTURE_2D,v.textures[q]),e.uniform1i(this.helper.getUniformLocation($),q),++q}for(var tt=0;tt<this.paletteTextures_.length;++tt){var et=this.paletteTextures_[tt];e.activeTexture(e["TEXTURE"+q]);var rt=et.getTexture(e);e.bindTexture(e.TEXTURE_2D,rt),e.uniform1i(this.helper.getUniformLocation(et.name),q),++q}R=x in l?l[x]:1;R<1&&(t.animate=!0),this.helper.setUniformFloatValue(Gt.TRANSITION_ALPHA,R),this.helper.setUniformFloatValue(Gt.DEPTH,W),this.helper.setUniformFloatValue(Gt.TEXTURE_PIXEL_WIDTH,j),this.helper.setUniformFloatValue(Gt.TEXTURE_PIXEL_HEIGHT,X),this.helper.setUniformFloatValue(Gt.TEXTURE_RESOLUTION,M),this.helper.setUniformFloatValue(Gt.TEXTURE_ORIGIN_X,G[0]+K*F[0]*M-a*M),this.helper.setUniformFloatValue(Gt.TEXTURE_ORIGIN_Y,G[1]-Z*F[1]*M+a*M);var nt=s;a>0&&(nt=i.getTileCoordExtent(y),Object(Q["A"])(nt,s,nt)),this.helper.setUniformFloatVec4(Gt.RENDER_EXTENT,nt),this.helper.setUniformFloatValue(Gt.RESOLUTION,r.resolution),this.helper.setUniformFloatValue(Gt.ZOOM,r.zoom),this.helper.drawElements(0,this.indices_.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var ot=this.helper.getCanvas(),at=this.tileTextureCache_;while(at.canExpireCache()){v=at.pop();v.dispose()}var st=function(t,e){o.expireCache(e.viewState.projection,zt)};return t.postRenderFunctions.push(st),this.postRender(e,t),ot},e.prototype.getData=function(t){var e=this.helper.getGL();if(!e)return null;var r=this.frameState_;if(!r)return null;var n=this.getLayer(),o=Object(D["a"])(r.pixelToCoordinateTransform,t.slice()),i=r.viewState,a=n.getExtent();if(a&&!Object(Q["f"])(Object(Ft["g"])(a,i.projection),o))return null;var s,c,u,f=n.getSources(Object(Q["b"])([o]),i.resolution);for(s=f.length-1;s>=0;--s)if(c=f[s],"ready"===c.getState()){if(u=c.getTileGridForProjection(i.projection),c.getWrapX())break;var h=u.getExtent();if(!h||Object(Q["f"])(h,o))break}if(s<0)return null;for(var l=this.tileTextureCache_,p=u.getZForResolution(i.resolution);p>=u.getMinZoom();--p){var d=u.getTileCoordForCoordAndZ(o,p),_=Wt(c,d);if(l.containsKey(_)){var g=l.get(_);if(g.loaded){var E=u.getOrigin(p),m=Object(St["c"])(u.getTileSize(p)),v=u.getResolution(p),T=(o[0]-E[0])/v-d[1]*m[0],y=(E[1]-o[1])/v-d[2]*m[1];return g.getPixelData(T,y)}}}return null},e.prototype.findAltTiles_=function(t,e,r,n){var o=t.getTileRangeForTileCoordAndZ(e,r,this.tempTileRange_);if(!o)return!1;for(var i=!0,a=this.tileTextureCache_,s=this.getLayer().getRenderSource(),c=o.minX;c<=o.maxX;++c)for(var u=o.minY;u<=o.maxY;++u){var f=Wt(s,[r,c,u]),h=!1;if(a.containsKey(f)){var l=a.get(f);l.loaded&&(Ht(n,l,r),h=!0)}h||(i=!1)}return i},e.prototype.removeHelper=function(){if(this.helper){var e=this.tileTextureCache_;e.forEach((function(t){return t.dispose()})),e.clear()}t.prototype.removeHelper.call(this)},e.prototype.disposeInternal=function(){var e=this.helper;if(e){var r=e.getGL();r.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}t.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_}})(ot);var kt=r("5c38"),Kt=r("7fc9"),Zt={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},qt={};function Jt(t){if("number"===typeof t)return Zt.NUMBER;if("boolean"===typeof t)return Zt.BOOLEAN;if("string"===typeof t)return Object(kt["d"])(t)?Zt.COLOR|Zt.STRING:Zt.STRING;if(!Array.isArray(t))throw new Error("Unhandled value type: ".concat(JSON.stringify(t)));var e=t,r=e.every((function(t){return"number"===typeof t}));if(r)return 3===e.length||4===e.length?Zt.COLOR|Zt.NUMBER_ARRAY:Zt.NUMBER_ARRAY;if("string"!==typeof e[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(e)));var n=qt[e[0]];if(void 0===n)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.getReturnType(e.slice(1))}function Qt(t){return Object(Kt["f"])(t)%1===0}function $t(t){var e=t.toString();return-1===e.indexOf(".")?e+".0":e}function te(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(t.length,"(").concat(t.map($t).join(", "),")")}function ee(t){var e=Object(kt["a"])(t).slice();return e.length<4&&e.push(1),te(e.map((function(t,e){return e<3?t/255:t})))}function re(t,e){return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function ne(t,e){return $t(re(t,e))}function oe(t,e,r){if(Array.isArray(e)&&"string"===typeof e[0]){var n=qt[e[0]];if(void 0===n)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(e)));return n.toGlsl(t,e.slice(1),r)}var o=Jt(e);if((o&Zt.NUMBER)>0)return $t(e);if((o&Zt.BOOLEAN)>0)return e.toString();if((o&Zt.STRING)>0&&(void 0===r||r==Zt.STRING))return ne(t,e.toString());if((o&Zt.COLOR)>0&&(void 0===r||r==Zt.COLOR))return ee(e);if((o&Zt.NUMBER_ARRAY)>0)return te(e);throw new Error("Unexpected expression ".concat(e," (expected type ").concat(r,")"))}function ie(t){if(!(Jt(t)&Zt.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(t)," instead"))}function ae(t){for(var e=0;e<t.length;e++)ie(t[e])}function se(t){if(!(Jt(t)&Zt.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(t)," instead"))}function ce(t){if(!(Jt(t)&Zt.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(t)," instead"))}function ue(t,e){if(t.length!==e)throw new Error("Exactly ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function fe(t,e){if(t.length<e)throw new Error("At least ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function he(t,e){if(t.length>e)throw new Error("At most ".concat(e," arguments were expected, got ").concat(t.length," instead"))}function le(t){if(t.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(t," instead"))}function pe(t){if(t.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(t," instead"))}function de(t,e){if(!Qt(e))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(t)))}function _e(t){return"u_var_"+t}qt["get"]={getReturnType:function(t){return Zt.ANY},toGlsl:function(t,e){ue(e,1),se(e[0]);var r=e[0].toString();-1===t.attributes.indexOf(r)&&t.attributes.push(r);var n=t.inFragmentShader?"v_":"a_";return n+r}},qt["var"]={getReturnType:function(t){return Zt.ANY},toGlsl:function(t,e){ue(e,1),se(e[0]);var r=e[0].toString();return-1===t.variables.indexOf(r)&&t.variables.push(r),_e(r)}};var ge="u_paletteTextures";qt["palette"]={getReturnType:function(t){return Zt.COLOR},toGlsl:function(t,e){ue(e,2),ie(e[0]);var r=oe(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var o=n.length,i=new Uint8Array(4*o),a=0;a<o;a++){var s=n[a],c=void 0;if("string"===typeof s)c=Object(kt["c"])(s);else{if(!Array.isArray(s))throw new Error("The second argument of palette must be an array of strings or colors");var u=s.length;if(4===u)c=s;else{if(3!==u)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(u));c=[s[0],s[1],s[2],1]}}var f=4*a;i[f]=c[0],i[f+1]=c[1],i[f+2]=c[2],i[f+3]=255*c[3]}t.paletteTextures||(t.paletteTextures=[]);var h="".concat(ge,"[").concat(t.paletteTextures.length,"]"),l=new _t(h,i);return t.paletteTextures.push(l),"texture2D(".concat(h,", vec2((").concat(r," + 0.5) / ").concat(o,".0, 0.5))")}};var Ee="getBandValue";function me(t){return{getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(e,r){ue(r,2);for(var n=Zt.ANY,o=0;o<r.length;o++)n&=Jt(r[o]);if(n===Zt.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~Zt.COLOR,"(".concat(oe(e,r[0],n)," ").concat(t," ").concat(oe(e,r[1],n),")")}}}function ve(t){return{getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(e,r){fe(r,2);for(var n=0;n<r.length;n++)ce(r[n]);var o="";return o=r.map((function(t){return oe(e,t)})).join(" ".concat(t," ")),o="(".concat(o,")"),o}}}qt["band"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){fe(e,1),he(e,3);var r=e[0];if(!(Ee in t.functions)){for(var n="",o=t.bandCount||1,i=0;i<o;i++){var a=Math.floor(i/4),s=i%4;s===o-1&&1===s&&(s=3);var c="".concat(Gt.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+="\n          if (band == ".concat(i+1,".0) {\n            return texture2D(").concat(c,", v_textureCoord + vec2(dx, dy))[").concat(s,"];\n          }\n        ")}t.functions[Ee]="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(Gt.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(Gt.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(n,"\n        }\n      ")}var u=oe(t,r),f=oe(t,e[1]||0),h=oe(t,e[2]||0);return"".concat(Ee,"(").concat(u,", ").concat(f,", ").concat(h,")")}},qt["time"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,0),"u_time"}},qt["zoom"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,0),"u_zoom"}},qt["resolution"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,0),"u_resolution"}},qt["*"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," * ").concat(oe(t,e[1]),")")}},qt["/"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," / ").concat(oe(t,e[1]),")")}},qt["+"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," + ").concat(oe(t,e[1]),")")}},qt["-"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," - ").concat(oe(t,e[1]),")")}},qt["clamp"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){ue(e,3),ae(e);var r=oe(t,e[1]),n=oe(t,e[2]);return"clamp(".concat(oe(t,e[0]),", ").concat(r,", ").concat(n,")")}},qt["%"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,2),ae(e),"mod(".concat(oe(t,e[0]),", ").concat(oe(t,e[1]),")")}},qt["^"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,2),ae(e),"pow(".concat(oe(t,e[0]),", ").concat(oe(t,e[1]),")")}},qt["abs"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,1),ae(e),"abs(".concat(oe(t,e[0]),")")}},qt["floor"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,1),ae(e),"floor(".concat(oe(t,e[0]),")")}},qt["round"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,1),ae(e),"floor(".concat(oe(t,e[0])," + 0.5)")}},qt["ceil"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,1),ae(e),"ceil(".concat(oe(t,e[0]),")")}},qt["sin"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,1),ae(e),"sin(".concat(oe(t,e[0]),")")}},qt["cos"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return ue(e,1),ae(e),"cos(".concat(oe(t,e[0]),")")}},qt["atan"]={getReturnType:function(t){return Zt.NUMBER},toGlsl:function(t,e){return fe(e,1),he(e,2),ae(e),2===e.length?"atan(".concat(oe(t,e[0]),", ").concat(oe(t,e[1]),")"):"atan(".concat(oe(t,e[0]),")")}},qt[">"]={getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," > ").concat(oe(t,e[1]),")")}},qt[">="]={getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," >= ").concat(oe(t,e[1]),")")}},qt["<"]={getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," < ").concat(oe(t,e[1]),")")}},qt["<="]={getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(t,e){return ue(e,2),ae(e),"(".concat(oe(t,e[0])," <= ").concat(oe(t,e[1]),")")}},qt["=="]=me("=="),qt["!="]=me("!="),qt["!"]={getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(t,e){return ue(e,1),ce(e[0]),"(!".concat(oe(t,e[0]),")")}},qt["all"]=ve("&&"),qt["any"]=ve("||"),qt["between"]={getReturnType:function(t){return Zt.BOOLEAN},toGlsl:function(t,e){ue(e,3),ae(e);var r=oe(t,e[1]),n=oe(t,e[2]),o=oe(t,e[0]);return"(".concat(o," >= ").concat(r," && ").concat(o," <= ").concat(n,")")}},qt["array"]={getReturnType:function(t){return Zt.NUMBER_ARRAY},toGlsl:function(t,e){fe(e,2),he(e,4),ae(e);var r=e.map((function(e){return oe(t,e,Zt.NUMBER)}));return"vec".concat(e.length,"(").concat(r.join(", "),")")}},qt["color"]={getReturnType:function(t){return Zt.COLOR},toGlsl:function(t,e){fe(e,3),he(e,4),ae(e);var r=e;3===e.length&&r.push(1);var n=e.map((function(e,r){return oe(t,e,Zt.NUMBER)+(r<3?" / 255.0":"")}));return"vec".concat(e.length,"(").concat(n.join(", "),")")}},qt["interpolate"]={getReturnType:function(t){for(var e=Zt.COLOR|Zt.NUMBER,r=3;r<t.length;r+=2)e&=Jt(t[r]);return e},toGlsl:function(t,e,r){le(e),fe(e,6);var n,o=e[0];switch(o[0]){case"linear":n=1;break;case"exponential":n=o[1];break;default:n=null}if(!n)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(o)));var i=void 0!==r?r:Zt.ANY,a=qt["interpolate"].getReturnType(e)&i;de(e,a);for(var s=oe(t,e[1]),c=$t(n),u="",f=2;f<e.length-2;f+=2){var h=oe(t,e[f]),l=u||oe(t,e[f+1],a),p=oe(t,e[f+2]),d=oe(t,e[f+3],a);u="mix(".concat(l,", ").concat(d,", pow(clamp((").concat(s," - ").concat(h,") / (").concat(p," - ").concat(h,"), 0.0, 1.0), ").concat(c,"))")}return u}},qt["match"]={getReturnType:function(t){for(var e=Zt.ANY,r=2;r<t.length;r+=2)e&=Jt(t[r]);return e&=Jt(t[t.length-1]),e},toGlsl:function(t,e,r){le(e),fe(e,4);var n=void 0!==r?r:Zt.ANY,o=qt["match"].getReturnType(e)&n;de(e,o);for(var i=oe(t,e[0]),a=oe(t,e[e.length-1],o),s=null,c=e.length-3;c>=1;c-=2){var u=oe(t,e[c]),f=oe(t,e[c+1],o);s="(".concat(i," == ").concat(u," ? ").concat(f," : ").concat(s||a,")")}return s}},qt["case"]={getReturnType:function(t){for(var e=Zt.ANY,r=1;r<t.length;r+=2)e&=Jt(t[r]);return e&=Jt(t[t.length-1]),e},toGlsl:function(t,e,r){pe(e),fe(e,3);var n=void 0!==r?r:Zt.ANY,o=qt["case"].getReturnType(e)&n;de(e,o);for(var i=0;i<e.length-1;i+=2)ce(e[i]);var a=oe(t,e[e.length-1],o),s=null;for(i=e.length-3;i>=0;i-=2){var c=oe(t,e[i]),u=oe(t,e[i+1],o);s="(".concat(c," ? ").concat(u," : ").concat(s||a,")")}return s}};var Te=function(){function t(){this.uniforms=[],this.attributes=[],this.varyings=[],this.sizeExpression="vec2(1.0)",this.rotationExpression="0.0",this.offsetExpression="vec2(0.0)",this.colorExpression="vec4(1.0)",this.texCoordExpression="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression="false",this.rotateWithView=!1}return t.prototype.addUniform=function(t){return this.uniforms.push(t),this},t.prototype.addAttribute=function(t){return this.attributes.push(t),this},t.prototype.addVarying=function(t,e,r){return this.varyings.push({name:t,type:e,expression:r}),this},t.prototype.setSizeExpression=function(t){return this.sizeExpression=t,this},t.prototype.setRotationExpression=function(t){return this.rotationExpression=t,this},t.prototype.setSymbolOffsetExpression=function(t){return this.offsetExpression=t,this},t.prototype.setColorExpression=function(t){return this.colorExpression=t,this},t.prototype.setTextureCoordinateExpression=function(t){return this.texCoordExpression=t,this},t.prototype.setFragmentDiscardExpression=function(t){return this.discardExpression=t,this},t.prototype.setSymbolRotateWithView=function(t){return this.rotateWithView=t,this},t.prototype.getSizeExpression=function(){return this.sizeExpression},t.prototype.getOffsetExpression=function(){return this.offsetExpression},t.prototype.getColorExpression=function(){return this.colorExpression},t.prototype.getTextureCoordinateExpression=function(){return this.texCoordExpression},t.prototype.getFragmentDiscardExpression=function(){return this.discardExpression},t.prototype.getSymbolVertexShader=function(t){var e=this.rotateWithView?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix",r=this.attributes,n=this.varyings;return t&&(r=r.concat("vec4 a_hitColor"),n=n.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\n").concat(r.map((function(t){return"attribute "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(n.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  mat4 offsetMatrix = ").concat(e,";\n  vec2 halfSize = ").concat(this.sizeExpression," * 0.5;\n  vec2 offset = ").concat(this.offsetExpression,";\n  float angle = ").concat(this.rotationExpression,";\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ").concat(this.texCoordExpression,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n").concat(n.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n"),"\n}")},t.prototype.getSymbolFragmentShader=function(t){var e=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"",r=this.varyings;return t&&(r=r.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),"precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n".concat(this.uniforms.map((function(t){return"uniform "+t+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n").concat(r.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n"),"\nvoid main(void) {\n  if (").concat(this.discardExpression,") { discard; }\n  gl_FragColor = ").concat(this.colorExpression,";\n  gl_FragColor.rgb *= gl_FragColor.a;\n").concat(e,"\n}")},t}();function ye(t){var e=t.symbol,r=void 0!==e.size?e.size:1,n=e.color||"white",o=e.textureCoord||[0,0,1,1],i=e.offset||[0,0],a=void 0!==e.opacity?e.opacity:1,s=void 0!==e.rotation?e.rotation:0,c={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{}},u=oe(c,r,Zt.NUMBER_ARRAY|Zt.NUMBER),f=oe(c,i,Zt.NUMBER_ARRAY),h=oe(c,o,Zt.NUMBER_ARRAY),l=oe(c,s,Zt.NUMBER),p={inFragmentShader:!0,variables:c.variables,attributes:[],stringLiteralsMap:c.stringLiteralsMap,functions:{}},d=oe(p,n,Zt.COLOR),_=oe(p,a,Zt.NUMBER),g="1.0",E="vec2(".concat(oe(p,r,Zt.NUMBER_ARRAY|Zt.NUMBER),").x");switch(e.symbolType){case"square":break;case"image":break;case"circle":g="(1.0-smoothstep(1.-4./".concat(E,",1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))");break;case"triangle":var m="(v_quadCoord*2.-1.)",v="(atan(".concat(m,".x,").concat(m,".y))");g="(1.0-smoothstep(.5-3./".concat(E,",.5,cos(floor(.5+").concat(v,"/2.094395102)*2.094395102-").concat(v,")*length(").concat(m,")))");break;default:throw new Error("Unexpected symbol type: "+e.symbolType)}var T=(new Te).setSizeExpression("vec2(".concat(u,")")).setRotationExpression(l).setSymbolOffsetExpression(f).setTextureCoordinateExpression(h).setSymbolRotateWithView(!!e.rotateWithView).setColorExpression("vec4(".concat(d,".rgb, ").concat(d,".a * ").concat(_," * ").concat(g,")"));if(t.filter){var y=oe(p,t.filter,Zt.BOOLEAN);T.setFragmentDiscardExpression("!".concat(y))}var R={};if(p.variables.forEach((function(e){var r=_e(e);T.addUniform("float ".concat(r)),R[r]=function(){if(!t.variables||void 0===t.variables[e])throw new Error("The following variable is missing from the style: ".concat(e));var r=t.variables[e];return"string"===typeof r&&(r=re(c,r)),void 0!==r?r:-9999999}})),"image"===e.symbolType&&e.src){var x=new Image;x.crossOrigin=void 0===e.crossOrigin?"anonymous":e.crossOrigin,x.src=e.src,T.addUniform("sampler2D u_texture").setColorExpression(T.getColorExpression()+" * texture2D(u_texture, v_texCoord)"),R["u_texture"]=x}return p.attributes.forEach((function(t){-1===c.attributes.indexOf(t)&&c.attributes.push(t),T.addVarying("v_".concat(t),"float","a_".concat(t))})),c.attributes.forEach((function(t){T.addAttribute("float a_".concat(t))})),{builder:T,attributes:c.attributes.map((function(t){return{name:t,callback:function(e,r){var n=r[t];return"string"===typeof n&&(n=re(c,n)),void 0!==n?n:-9999999}}})),uniforms:R}}var Re=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),xe=function(t){function e(e){var r=this,n=Object(c["a"])({},e);return r=t.call(this,n)||this,r.parseResult_=ye(e.style),r.styleVariables_=e.style.variables||{},r.hitDetectionDisabled_=!!e.disableHitDetection,r}return Re(e,t),e.prototype.createRenderer=function(){return new pt(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitVertexShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolFragmentShader(!0),uniforms:this.parseResult_.uniforms,attributes:this.parseResult_.attributes})},e.prototype.updateStyleVariables=function(t){Object(c["a"])(this.styleVariables_,t),this.changed()},e}(n["a"]);e["a"]=xe},1880:function(t,e,r){},"2d71":function(t,e,r){"use strict";r("5bc0");var n=r("5eee");r.d(e,"a",(function(){return n["a"]}));var o=r("a2c7");r.d(e,"e",(function(){return o["a"]}));var i=r("0710");r.d(e,"c",(function(){return i["a"]}));r("256f");var a=r("480c");r.d(e,"d",(function(){return a["a"]}));var s=r("d0e9");r.d(e,"b",(function(){return s["a"]}))},"4adc":function(t,e,r){"use strict";r("1880")},"5bc0":function(t,e,r){},"7fd1":function(t,e,r){"use strict";(function(t){function n(){var e='const e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let e=1,n=arguments.length;e<n;++e){const n=arguments[e];if(null!=n)for(const e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}return t},n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"";n.indexOf("firefox");-1!==n.indexOf("safari")&&-1==n.indexOf("chrom")&&(n.indexOf("version/15.4")>=0||n.match(/cpu (os|iphone os) 15_4 like mac os x/)),-1!==n.indexOf("webkit")&&n.indexOf("edge"),n.indexOf("macintosh"),"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope),function(){let e=!1;try{const n=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch(e){}}(),new Array(6);const t="GENERATE_BUFFERS",o=[],r={vertexPosition:0,indexPosition:0};function i(e,n,t,o,r){e[n+0]=t,e[n+1]=o,e[n+2]=r}function s(e,n,t,s,f,c){const l=3+f,a=e[n+0],u=e[n+1],d=o;d.length=f;for(let t=0;t<d.length;t++)d[t]=e[n+2+t];let g=c?c.vertexPosition:0,x=c?c.indexPosition:0;const h=g/l;return i(t,g,a,u,0),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,1),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,2),d.length&&t.set(d,g+3),g+=l,i(t,g,a,u,3),d.length&&t.set(d,g+3),g+=l,s[x++]=h,s[x++]=h+1,s[x++]=h+3,s[x++]=h+1,s[x++]=h+2,s[x++]=h+3,r.vertexPosition=g,r.indexPosition=x,r}const f=self;f.onmessage=n=>{const o=n.data;if(o.type===t){const n=3,t=2,r=o.customAttributesCount,i=t+r,c=new Float32Array(o.renderInstructions),l=c.length/i,a=4*l*(r+n),u=new Uint32Array(6*l),d=new Float32Array(a);let g;for(let e=0;e<c.length;e+=i)g=s(c,e,d,u,r,g);const x=e({vertexBuffer:d.buffer,indexBuffer:u.buffer,renderInstructions:c.buffer},o);f.postMessage(x,[d.buffer,u.buffer,c.buffer])}};';return new Worker("undefined"===typeof Blob?"data:application/javascript;base64,"+t.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}r.d(e,"a",(function(){return n}))}).call(this,r("b639").Buffer)},d0e9:function(t,e,r){"use strict";var n=r("2ef1"),o=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',a=function(t){function e(e){var r,n=e||{},o=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(o=n.interpolate),r=void 0!==n.attributions?n.attributions:[i];var a=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",s=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,attributionsCollapsible:!1,cacheSize:n.cacheSize,crossOrigin:a,interpolate:o,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,opaque:void 0===n.opaque||n.opaque,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,transition:n.transition,url:s,wrapX:n.wrapX,zDirection:n.zDirection})||this}return o(e,t),e}(n["a"]);e["a"]=a}}]);